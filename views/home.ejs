<%- include('partials/header.ejs', { user }) %> 

<!-- Home page  -->

<h2 class="text-center">Search for a recipe</h2>
<h4 class="text-center">Please drink responsibly</h4>
<p class="text-center">Include one of the following parameters:</p>
<p class="text-center">Name: name of cocktail. This parameter supports partial matches (e.g. bloody will match bloody mary and bloody margarita)</p>
<p class="text-center">Ingredients: comma-separated string of ingredients to search. Only cocktails containing all listed ingredients will be returned. For example, to search cocktails containing Vodka and lemon juice, use vodka, lemon juice.</p>

<div class="container-fluid">
    <form class="d-flex" method="GET" action="/">
      <input class="form-control me-2" name="search" type="search" placeholder="Search for a recipe" aria-label="Search">
      <button class="btn btn-outline-success" type="submit">Search</button>
    </form>
</div>

<% results.forEach(function(cocktail){%>
    <div class="well">
        <form class="" method="GET" action="/drinks">
            <h3> <a href="/drinks/:id" style="color:gold;"><%= cocktail.name %></a> </h3>
        </form>
        
        <p> <%= cocktail.ingredients %> </p>
        <p> <%= cocktail.instructions %> </p>

        <% if (user) { %>
        <form method="POST" action="/users/favorites">
            <input hidden type="text" name="name" value="<%= cocktail.name %>">
            <input hidden type="text" name="ingredients" value="<%= cocktail.ingredients %>">
            <input hidden type="text" name="instructions" value="<%= cocktail.instructions %>">
            <button class="btn btn-primary" type="submit">Add to Favorite Cocktails</button>
        </form>

        <% } else { %>
        <form method="POST" action="/users/new">
            <input hidden type="text" name="name" value="<%= cocktail.name %>">
            <input hidden type="text" name="ingredients" value="<%= cocktail.ingredients %>">
            <input hidden type="text" name="instructions" value="<%= cocktail.instructions %>">
            <button class="btn btn-primary" type="submit">Sign up to Add to Your Favorite Cocktails</button>
        </form>
        <% } %>
    </div>
<% }) %>

<%- include('partials/footer.ejs') %>